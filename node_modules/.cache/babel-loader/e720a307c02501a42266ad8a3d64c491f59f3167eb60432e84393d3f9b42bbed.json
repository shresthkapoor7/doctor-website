{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { isStorageError } from '../lib/errors';\nimport StreamDownloadBuilder from './StreamDownloadBuilder';\nexport default class BlobDownloadBuilder {\n  constructor(downloadFn, shouldThrowOnError) {\n    this.downloadFn = downloadFn;\n    this.shouldThrowOnError = shouldThrowOnError;\n  }\n  asStream() {\n    return new StreamDownloadBuilder(this.downloadFn, this.shouldThrowOnError);\n  }\n  then(onfulfilled, onrejected) {\n    return this.execute().then(onfulfilled, onrejected);\n  }\n  execute() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const result = yield this.downloadFn();\n        return {\n          data: yield result.blob(),\n          error: null\n        };\n      } catch (error) {\n        if (this.shouldThrowOnError) {\n          throw error;\n        }\n        if (isStorageError(error)) {\n          return {\n            data: null,\n            error\n          };\n        }\n        throw error;\n      }\n    });\n  }\n}","map":{"version":3,"names":["isStorageError","StreamDownloadBuilder","BlobDownloadBuilder","constructor","downloadFn","shouldThrowOnError","asStream","then","onfulfilled","onrejected","execute","result","data","blob","error"],"sources":["/Users/shresthkapoor/code/doctor-website/node_modules/@supabase/storage-js/src/packages/BlobDownloadBuilder.ts"],"sourcesContent":["import { isStorageError } from '../lib/errors'\nimport { DownloadResult } from '../lib/types'\nimport StreamDownloadBuilder from './StreamDownloadBuilder'\n\nexport default class BlobDownloadBuilder implements PromiseLike<DownloadResult<Blob>> {\n  constructor(private downloadFn: () => Promise<Response>, private shouldThrowOnError: boolean) {}\n\n  asStream(): StreamDownloadBuilder {\n    return new StreamDownloadBuilder(this.downloadFn, this.shouldThrowOnError)\n  }\n\n  then<TResult1 = DownloadResult<Blob>, TResult2 = never>(\n    onfulfilled?: ((value: DownloadResult<Blob>) => TResult1 | PromiseLike<TResult1>) | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | null\n  ): Promise<TResult1 | TResult2> {\n    return this.execute().then(onfulfilled, onrejected)\n  }\n\n  private async execute(): Promise<DownloadResult<Blob>> {\n    try {\n      const result = await this.downloadFn()\n\n      return {\n        data: await result.blob(),\n        error: null,\n      }\n    } catch (error) {\n      if (this.shouldThrowOnError) {\n        throw error\n      }\n\n      if (isStorageError(error)) {\n        return { data: null, error }\n      }\n\n      throw error\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,cAAc,QAAQ,eAAe;AAE9C,OAAOC,qBAAqB,MAAM,yBAAyB;AAE3D,eAAc,MAAOC,mBAAmB;EACtCC,YAAoBC,UAAmC,EAAUC,kBAA2B;IAAxE,KAAAD,UAAU,GAAVA,UAAU;IAAmC,KAAAC,kBAAkB,GAAlBA,kBAAkB;EAAY;EAE/FC,QAAQA,CAAA;IACN,OAAO,IAAIL,qBAAqB,CAAC,IAAI,CAACG,UAAU,EAAE,IAAI,CAACC,kBAAkB,CAAC;EAC5E;EAEAE,IAAIA,CACFC,WAAwF,EACxFC,UAAuE;IAEvE,OAAO,IAAI,CAACC,OAAO,EAAE,CAACH,IAAI,CAACC,WAAW,EAAEC,UAAU,CAAC;EACrD;EAEcC,OAAOA,CAAA;;MACnB,IAAI;QACF,MAAMC,MAAM,GAAG,MAAM,IAAI,CAACP,UAAU,EAAE;QAEtC,OAAO;UACLQ,IAAI,EAAE,MAAMD,MAAM,CAACE,IAAI,EAAE;UACzBC,KAAK,EAAE;SACR;OACF,CAAC,OAAOA,KAAK,EAAE;QACd,IAAI,IAAI,CAACT,kBAAkB,EAAE;UAC3B,MAAMS,KAAK;;QAGb,IAAId,cAAc,CAACc,KAAK,CAAC,EAAE;UACzB,OAAO;YAAEF,IAAI,EAAE,IAAI;YAAEE;UAAK,CAAE;;QAG9B,MAAMA,KAAK;;IAEf,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}